import{r as F}from"./index-76fb7be0.js";import{E as xn,Z as Jn,q as re,n as Dn}from"./nivo-colors.es-6a419262.js";import{x as ie,v as Q,y as A,z as H,A as $,B,C as ln,D as Kn,E as Nn,F as Fn,G as ae,H as Yn,J as Qn,K as Zn,L as nt,M as tt,N as et,O as oe,P as ue,Q as ce,S as se,T as dn,U as le,V as fe,k as J,n as rt,u as ge,W as me}from"./viridis-86f79054.js";import{_ as de,u as On}from"./uniq-2acdba94.js";import{g as pn}from"./_commonjsHelpers-de833af9.js";import{a as it}from"./_baseForOwn-af9f9dd7.js";import{j as ve,d as he,a as ye,i as xe}from"./hasIn-bc1d64c1.js";import{_ as pe}from"./_baseEach-997447e4.js";import{c as Te,u as at,b as Me,a as ke,i as be,t as Ce}from"./_baseIsEqual-83a59b7a.js";import{t as ot,c as Tn,a as jn,f as we,b as Ue,d as Se,e as Pn,g as De,l as Fe}from"./linear-b6c2185e.js";import{j as S}from"./jsx-runtime-ffb262ed.js";import{P as M}from"./index-8d47fad6.js";function Ye(n,t,e){n=+n,t=+t,e=(o=arguments.length)<2?(t=n,n=0,1):o<3?1:+e;for(var a=-1,o=Math.max(0,Math.ceil((t-n)/e))|0,r=new Array(o);++a<o;)r[a]=n+a*e;return r}function Mn(){var n=ie().unknown(void 0),t=n.domain,e=n.range,a=0,o=1,r,i,u=!1,l=0,s=0,f=.5;delete n.unknown;function g(){var c=t().length,m=o<a,d=m?o:a,v=m?a:o;r=(v-d)/Math.max(1,c-l+s*2),u&&(r=Math.floor(r)),d+=(v-d-r*(c-l))*f,i=r*(1-l),u&&(d=Math.round(d),i=Math.round(i));var y=Ye(c).map(function(p){return d+r*p});return e(m?y.reverse():y)}return n.domain=function(c){return arguments.length?(t(c),g()):t()},n.range=function(c){return arguments.length?([a,o]=c,a=+a,o=+o,g()):[a,o]},n.rangeRound=function(c){return[a,o]=c,a=+a,o=+o,u=!0,g()},n.bandwidth=function(){return i},n.step=function(){return r},n.round=function(c){return arguments.length?(u=!!c,g()):u},n.padding=function(c){return arguments.length?(l=Math.min(1,s=+c),g()):l},n.paddingInner=function(c){return arguments.length?(l=Math.min(1,c),g()):l},n.paddingOuter=function(c){return arguments.length?(s=+c,g()):s},n.align=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),g()):f},n.copy=function(){return Mn(t(),[a,o]).round(u).paddingInner(l).paddingOuter(s).align(f)},Q.apply(g(),arguments)}function ut(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return ut(t())},n}function Oe(){return ut(Mn.apply(null,arguments).paddingInner(1))}function ct(n,t){n=n.slice();var e=0,a=n.length-1,o=n[e],r=n[a],i;return r<o&&(i=e,e=a,a=i,i=o,o=r,r=i),n[e]=t.floor(o),n[a]=t.ceil(r),n}function $n(n){return Math.log(n)}function An(n){return Math.exp(n)}function je(n){return-Math.log(-n)}function Pe(n){return-Math.exp(-n)}function $e(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Ae(n){return n===10?$e:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}function Ee(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}function En(n){return function(t){return-n(-t)}}function We(n){var t=n($n,An),e=t.domain,a=10,o,r;function i(){return o=Ee(a),r=Ae(a),e()[0]<0?(o=En(o),r=En(r),n(je,Pe)):n($n,An),t}return t.base=function(u){return arguments.length?(a=+u,i()):a},t.domain=function(u){return arguments.length?(e(u),i()):e()},t.ticks=function(u){var l=e(),s=l[0],f=l[l.length-1],g;(g=f<s)&&(c=s,s=f,f=c);var c=o(s),m=o(f),d,v,y,p=u==null?10:+u,x=[];if(!(a%1)&&m-c<p){if(c=Math.floor(c),m=Math.ceil(m),s>0){for(;c<=m;++c)for(v=1,d=r(c);v<a;++v)if(y=d*v,!(y<s)){if(y>f)break;x.push(y)}}else for(;c<=m;++c)for(v=a-1,d=r(c);v>=1;--v)if(y=d*v,!(y<s)){if(y>f)break;x.push(y)}x.length*2<p&&(x=jn(s,f,p))}else x=jn(c,m,Math.min(m-c,p)).map(r);return g?x.reverse():x},t.tickFormat=function(u,l){if(l==null&&(l=a===10?".0e":","),typeof l!="function"&&(l=we(l)),u===1/0)return l;u==null&&(u=10);var s=Math.max(1,a*u/t.ticks().length);return function(f){var g=f/r(Math.round(o(f)));return g*a<a-.5&&(g*=a),g<=s?l(f):""}},t.nice=function(){return e(ct(e(),{floor:function(u){return r(Math.floor(o(u)))},ceil:function(u){return r(Math.ceil(o(u)))}}))},t}function st(){var n=We(ot()).domain([1,10]);return n.copy=function(){return Tn(n,st()).base(n.base())},Q.apply(n,arguments),n}function Wn(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function Hn(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function He(n){var t=1,e=n(Wn(t),Hn(t));return e.constant=function(a){return arguments.length?n(Wn(t=+a),Hn(t)):t},Ue(e)}function lt(){var n=He(ot());return n.copy=function(){return Tn(n,lt()).constant(n.constant())},Q.apply(n,arguments)}var tn=A(function(){},function(n,t){n.setTime(+n+t)},function(n,t){return t-n});tn.every=function(n){return n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?A(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):tn};const Be=tn;tn.range;var ft=A(function(n){n.setTime(n-n.getMilliseconds())},function(n,t){n.setTime(+n+t*H)},function(n,t){return(t-n)/H},function(n){return n.getUTCSeconds()});const I=ft;ft.range;var gt=A(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*H)},function(n,t){n.setTime(+n+t*$)},function(n,t){return(t-n)/$},function(n){return n.getMinutes()});const mt=gt;gt.range;var dt=A(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*H-n.getMinutes()*$)},function(n,t){n.setTime(+n+t*B)},function(n,t){return(t-n)/B},function(n){return n.getHours()});const vt=dt;dt.range;var ht=A(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,t){n.setMonth(n.getMonth()+t)},function(n,t){return t.getMonth()-n.getMonth()+(t.getFullYear()-n.getFullYear())*12},function(n){return n.getMonth()});const yt=ht;ht.range;var xt=A(function(n){n.setUTCSeconds(0,0)},function(n,t){n.setTime(+n+t*$)},function(n,t){return(t-n)/$},function(n){return n.getUTCMinutes()});const pt=xt;xt.range;var Tt=A(function(n){n.setUTCMinutes(0,0,0)},function(n,t){n.setTime(+n+t*B)},function(n,t){return(t-n)/B},function(n){return n.getUTCHours()});const Mt=Tt;Tt.range;var kt=A(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCMonth(n.getUTCMonth()+t)},function(n,t){return t.getUTCMonth()-n.getUTCMonth()+(t.getUTCFullYear()-n.getUTCFullYear())*12},function(n){return n.getUTCMonth()});const bt=kt;kt.range;function Ct(n,t,e,a,o,r){const i=[[I,1,H],[I,5,5*H],[I,15,15*H],[I,30,30*H],[r,1,$],[r,5,5*$],[r,15,15*$],[r,30,30*$],[o,1,B],[o,3,3*B],[o,6,6*B],[o,12,12*B],[a,1,Fn],[a,2,2*Fn],[e,1,ae],[t,1,Yn],[t,3,3*Yn],[n,1,ln]];function u(s,f,g){const c=f<s;c&&([s,f]=[f,s]);const m=g&&typeof g.range=="function"?g:l(s,f,g),d=m?m.range(s,+f+1):[];return c?d.reverse():d}function l(s,f,g){const c=Math.abs(f-s)/g,m=Se(([,,y])=>y).right(i,c);if(m===i.length)return n.every(Pn(s/ln,f/ln,g));if(m===0)return Be.every(Math.max(Pn(s,f,g),1));const[d,v]=i[c/i[m-1][2]<i[m][2]/c?m-1:m];return d.every(v)}return[u,l]}const[_e,Xe]=Ct(Kn,bt,Zn,Qn,Mt,pt),[Le,ze]=Ct(Nn,yt,tt,nt,vt,mt);function qe(n){return new Date(n)}function Re(n){return n instanceof Date?+n:+new Date(+n)}function kn(n,t,e,a,o,r,i,u,l,s){var f=De(),g=f.invert,c=f.domain,m=s(".%L"),d=s(":%S"),v=s("%I:%M"),y=s("%I %p"),p=s("%a %d"),x=s("%b %d"),b=s("%B"),T=s("%Y");function C(h){return(l(h)<h?m:u(h)<h?d:i(h)<h?v:r(h)<h?y:a(h)<h?o(h)<h?p:x:e(h)<h?b:T)(h)}return f.invert=function(h){return new Date(g(h))},f.domain=function(h){return arguments.length?c(Array.from(h,Re)):c().map(qe)},f.ticks=function(h){var w=c();return n(w[0],w[w.length-1],h??10)},f.tickFormat=function(h,w){return w==null?C:s(w)},f.nice=function(h){var w=c();return(!h||typeof h.range!="function")&&(h=t(w[0],w[w.length-1],h??10)),h?c(ct(w,h)):f},f.copy=function(){return Tn(f,kn(n,t,e,a,o,r,i,u,l,s))},f}function Ve(){return Q.apply(kn(Le,ze,Nn,yt,tt,nt,vt,mt,I,et).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ge(){return Q.apply(kn(_e,Xe,Kn,bt,Zn,Qn,Mt,pt,I,oe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var Ie=it,Je=de;function Ke(n,t){return n&&n.length?Je(n,Ie(t)):[]}var Ne=Ke;const Qe=pn(Ne);var Ze=pe,nr=Te;function tr(n,t){var e=-1,a=nr(n)?Array(n.length):[];return Ze(n,function(o,r,i){a[++e]=t(o,r,i)}),a}var er=tr;function rr(n,t){var e=n.length;for(n.sort(t);e--;)n[e]=n[e].value;return n}var ir=rr,Bn=ve;function ar(n,t){if(n!==t){var e=n!==void 0,a=n===null,o=n===n,r=Bn(n),i=t!==void 0,u=t===null,l=t===t,s=Bn(t);if(!u&&!s&&!r&&n>t||r&&i&&l&&!u&&!s||a&&i&&l||!e&&l||!o)return 1;if(!a&&!r&&!s&&n<t||s&&e&&o&&!a&&!r||u&&e&&o||!i&&o||!l)return-1}return 0}var or=ar,ur=or;function cr(n,t,e){for(var a=-1,o=n.criteria,r=t.criteria,i=o.length,u=e.length;++a<i;){var l=ur(o[a],r[a]);if(l){if(a>=u)return l;var s=e[a];return l*(s=="desc"?-1:1)}}return n.index-t.index}var sr=cr,fn=he,lr=ye,fr=it,gr=er,mr=ir,dr=at,vr=sr,hr=xe,yr=Me;function xr(n,t,e){t.length?t=fn(t,function(r){return yr(r)?function(i){return lr(i,r.length===1?r[0]:r)}:r}):t=[hr];var a=-1;t=fn(t,dr(fr));var o=gr(n,function(r,i,u){var l=fn(t,function(s){return s(r)});return{criteria:l,index:++a,value:r}});return mr(o,function(r,i){return vr(r,i,e)})}var pr=xr,Tr=ce,Mr=pr,kr=ue,_n=se,br=kr(function(n,t){if(n==null)return[];var e=t.length;return e>1&&_n(n,t[0],t[1])?t=[]:e>2&&_n(t[0],t[1],t[2])&&(t=[t[0]]),Mr(n,Tr(t,1),[])}),Cr=br;const wr=pn(Cr);var Ur=ke,Sr=be,Dr="[object Date]";function Fr(n){return Sr(n)&&Ur(n)==Dr}var Yr=Fr,Or=Yr,jr=at,Xn=Ce,Ln=Xn&&Xn.isDate,Pr=Ln?jr(Ln):Or,$r=Pr;const Ar=pn($r);var gn=new Date,mn=new Date;function D(n,t,e,a){function o(r){return n(r=arguments.length===0?new Date:new Date(+r)),r}return o.floor=function(r){return n(r=new Date(+r)),r},o.ceil=function(r){return n(r=new Date(r-1)),t(r,1),n(r),r},o.round=function(r){var i=o(r),u=o.ceil(r);return r-i<u-r?i:u},o.offset=function(r,i){return t(r=new Date(+r),i==null?1:Math.floor(i)),r},o.range=function(r,i,u){var l=[],s;if(r=o.ceil(r),u=u==null?1:Math.floor(u),!(r<i)||!(u>0))return l;do l.push(s=new Date(+r)),t(r,u),n(r);while(s<r&&r<i);return l},o.filter=function(r){return D(function(i){if(i>=i)for(;n(i),!r(i);)i.setTime(i-1)},function(i,u){if(i>=i)if(u<0)for(;++u<=0;)for(;t(i,-1),!r(i););else for(;--u>=0;)for(;t(i,1),!r(i););})},e&&(o.count=function(r,i){return gn.setTime(+r),mn.setTime(+i),n(gn),n(mn),Math.floor(e(gn,mn))},o.every=function(r){return r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?o.filter(a?function(i){return a(i)%r===0}:function(i){return o.count(0,i)%r===0}):o}),o}var en=D(function(){},function(n,t){n.setTime(+n+t)},function(n,t){return t-n});en.every=function(n){return n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?D(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):en};const zn=en;en.range;var rn=1e3,K=6e4,an=36e5,wt=6048e5,Ut=D(function(n){n.setTime(n-n.getMilliseconds())},function(n,t){n.setTime(+n+t*rn)},function(n,t){return(t-n)/rn},function(n){return n.getUTCSeconds()});const qn=Ut;Ut.range;var St=D(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*rn)},function(n,t){n.setTime(+n+t*K)},function(n,t){return(t-n)/K},function(n){return n.getMinutes()});const Er=St;St.range;var Dt=D(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*rn-n.getMinutes()*K)},function(n,t){n.setTime(+n+t*an)},function(n,t){return(t-n)/an},function(n){return n.getHours()});const Wr=Dt;Dt.range;function L(n){return D(function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e*7)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*K)/wt})}var vn=L(0),Ft=L(1),Yt=L(2),Ot=L(3),jt=L(4),Pt=L(5),$t=L(6);vn.range;Ft.range;Yt.range;Ot.range;jt.range;Pt.range;$t.range;var At=D(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,t){n.setMonth(n.getMonth()+t)},function(n,t){return t.getMonth()-n.getMonth()+(t.getFullYear()-n.getFullYear())*12},function(n){return n.getMonth()});const Hr=At;At.range;var bn=D(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n,t){return t.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});bn.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:D(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)})};const Br=bn;bn.range;var Et=D(function(n){n.setUTCSeconds(0,0)},function(n,t){n.setTime(+n+t*K)},function(n,t){return(t-n)/K},function(n){return n.getUTCMinutes()});const _r=Et;Et.range;var Wt=D(function(n){n.setUTCMinutes(0,0,0)},function(n,t){n.setTime(+n+t*an)},function(n,t){return(t-n)/an},function(n){return n.getUTCHours()});const Xr=Wt;Wt.range;function z(n){return D(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e*7)},function(t,e){return(e-t)/wt})}var hn=z(0),Ht=z(1),Bt=z(2),_t=z(3),Xt=z(4),Lt=z(5),zt=z(6);hn.range;Ht.range;Bt.range;_t.range;Xt.range;Lt.range;zt.range;var qt=D(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCMonth(n.getUTCMonth()+t)},function(n,t){return t.getUTCMonth()-n.getUTCMonth()+(t.getUTCFullYear()-n.getUTCFullYear())*12},function(n){return n.getUTCMonth()});const Lr=qt;qt.range;var Cn=D(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCFullYear(n.getUTCFullYear()+t)},function(n,t){return t.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});Cn.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:D(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)})};const zr=Cn;Cn.range;function X(){return X=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},X.apply(this,arguments)}var G=[function(n){return n.setMilliseconds(0)},function(n){return n.setSeconds(0)},function(n){return n.setMinutes(0)},function(n){return n.setHours(0)},function(n){return n.setDate(1)},function(n){return n.setMonth(0)}],qr={millisecond:[],second:G.slice(0,1),minute:G.slice(0,2),hour:G.slice(0,3),day:G.slice(0,4),month:G.slice(0,5),year:G.slice(0,6)},Rr=function(n){return function(t){return qr[n].forEach(function(e){e(t)}),t}},Rt=function(n){var t=n.format,e=t===void 0?"native":t,a=n.precision,o=a===void 0?"millisecond":a,r=n.useUTC,i=r===void 0||r,u=Rr(o);return function(l){if(l===void 0)return l;if(e==="native"||l instanceof Date)return u(l);var s=i?le(e):fe(e);return u(s(l))}},Vr=function(n,t,e,a){var o,r,i,u,l=n.min,s=l===void 0?0:l,f=n.max,g=f===void 0?"auto":f,c=n.stacked,m=c!==void 0&&c,d=n.reverse,v=d!==void 0&&d,y=n.clamp,p=y!==void 0&&y,x=n.nice,b=x!==void 0&&x;s==="auto"?o=m===!0?(r=t.minStacked)!=null?r:0:t.min:o=s,g==="auto"?i=m===!0?(u=t.maxStacked)!=null?u:0:t.max:i=g;var T=Fe().rangeRound(a==="x"?[0,e]:[e,0]).domain(v?[i,o]:[o,i]).clamp(p);return b===!0?T.nice():typeof b=="number"&&T.nice(b),Gr(T,m)},Gr=function(n,t){t===void 0&&(t=!1);var e=n;return e.type="linear",e.stacked=t,e},Ir=function(n,t,e){var a=Oe().range([0,e]).domain(t.all);return a.type="point",a},Jr=function(n,t,e,a){var o=n.round,r=o===void 0||o,i=Mn().range(a==="x"?[0,e]:[e,0]).domain(t.all).round(r);return Kr(i)},Kr=function(n){var t=n;return t.type="band",t},Nr=function(n,t,e){var a,o,r=n.format,i=r===void 0?"native":r,u=n.precision,l=u===void 0?"millisecond":u,s=n.min,f=s===void 0?"auto":s,g=n.max,c=g===void 0?"auto":g,m=n.useUTC,d=m===void 0||m,v=n.nice,y=v!==void 0&&v,p=Rt({format:i,precision:l,useUTC:d});a=f==="auto"?p(t.min):i!=="native"?p(f):f,o=c==="auto"?p(t.max):i!=="native"?p(c):c;var x=d?Ge():Ve();x.range([0,e]),a&&o&&x.domain([a,o]),y===!0?x.nice():typeof y!="object"&&typeof y!="number"||x.nice(y);var b=x;return b.type="time",b.useUTC=d,b},Qr=function(n,t,e,a){var o,r=n.base,i=r===void 0?10:r,u=n.min,l=u===void 0?"auto":u,s=n.max,f=s===void 0?"auto":s;if(t.all.some(function(v){return v===0}))throw new Error("a log scale domain must not include or cross zero");var g,c,m=!1;if(t.all.filter(function(v){return v!=null}).forEach(function(v){m||(o===void 0?o=Math.sign(v):Math.sign(v)!==o&&(m=!0))}),m)throw new Error("a log scale domain must be strictly-positive or strictly-negative");g=l==="auto"?t.min:l,c=f==="auto"?t.max:f;var d=st().domain([g,c]).rangeRound(a==="x"?[0,e]:[e,0]).base(i).nice();return d.type="log",d},Zr=function(n,t,e,a){var o,r,i=n.constant,u=i===void 0?1:i,l=n.min,s=l===void 0?"auto":l,f=n.max,g=f===void 0?"auto":f,c=n.reverse,m=c!==void 0&&c;o=s==="auto"?t.min:s,r=g==="auto"?t.max:g;var d=lt().constant(u).rangeRound(a==="x"?[0,e]:[e,0]).nice();m===!0?d.domain([r,o]):d.domain([o,r]);var v=d;return v.type="symlog",v},ni=function(n){return n==="x"?"y":"x"},ti=function(n,t){return n===t},ei=function(n,t){return n.getTime()===t.getTime()};function Rn(n,t,e,a){switch(n.type){case"linear":return Vr(n,t,e,a);case"point":return Ir(n,t,e);case"band":return Jr(n,t,e,a);case"time":return Nr(n,t,e);case"log":return Qr(n,t,e,a);case"symlog":return Zr(n,t,e,a);default:throw new Error("invalid scale spec")}}var Vn=function(n,t,e){var a;if("stacked"in e&&e.stacked){var o=n.data[t==="x"?"xStacked":"yStacked"];return o==null?null:e(o)}return(a=e(n.data[t]))!=null?a:null},Si=function(n,t,e,a,o){var r=n.map(function(f){return function(g){return X({},g,{data:g.data.map(function(c){return{data:X({},c)}})})}(f)}),i=ri(r,t,e);"stacked"in t&&t.stacked===!0&&ii(i,r),"stacked"in e&&e.stacked===!0&&ai(i,r);var u=Rn(t,i.x,a,"x"),l=Rn(e,i.y,o,"y"),s=r.map(function(f){return X({},f,{data:f.data.map(function(g){return X({},g,{position:{x:Vn(g,"x",u),y:Vn(g,"y",l)}})})})});return X({},i,{series:s,xScale:u,yScale:l})},ri=function(n,t,e){return{x:Gn(n,"x",t),y:Gn(n,"y",e)}},Gn=function(n,t,e,a){var o=a===void 0?{}:a,r=o.getValue,i=r===void 0?function(d){return d.data[t]}:r,u=o.setValue,l=u===void 0?function(d,v){d.data[t]=v}:u;if(e.type==="linear")n.forEach(function(d){d.data.forEach(function(v){var y=i(v);y&&l(v,parseFloat(String(y)))})});else if(e.type==="time"&&e.format!=="native"){var s=Rt(e);n.forEach(function(d){d.data.forEach(function(v){var y=i(v);y&&l(v,s(y))})})}var f=[];switch(n.forEach(function(d){d.data.forEach(function(v){f.push(i(v))})}),e.type){case"linear":var g=wr(On(f).filter(function(d){return d!==null}),function(d){return d});return{all:g,min:Math.min.apply(Math,g),max:Math.max.apply(Math,g)};case"time":var c=Qe(f,function(d){return d.getTime()}).slice(0).sort(function(d,v){return v.getTime()-d.getTime()}).reverse();return{all:c,min:c[0],max:dn(c)};default:var m=On(f);return{all:m,min:m[0],max:dn(m)}}},Vt=function(n,t,e){var a=ni(n),o=[];t[a].all.forEach(function(r){var i=Ar(r)?ei:ti,u=[];e.forEach(function(l){var s=l.data.find(function(m){return i(m.data[a],r)}),f=null,g=null;if(s!==void 0){if((f=s.data[n])!==null){var c=dn(u);c===void 0?g=f:c!==null&&(g=c+f)}s.data[n==="x"?"xStacked":"yStacked"]=g}u.push(g),g!==null&&o.push(g)})}),t[n].minStacked=Math.min.apply(Math,o),t[n].maxStacked=Math.max.apply(Math,o)},ii=function(n,t){return Vt("x",n,t)},ai=function(n,t){return Vt("y",n,t)},Gt=function(n){var t=n.bandwidth();if(t===0)return n;var e=t/2;return n.round()&&(e=Math.round(e)),function(a){var o;return((o=n(a))!=null?o:0)+e}},It={millisecond:[zn,zn],second:[qn,qn],minute:[Er,_r],hour:[Wr,Xr],day:[D(function(n){return n.setHours(0,0,0,0)},function(n,t){return n.setDate(n.getDate()+t)},function(n,t){return(t.getTime()-n.getTime())/864e5},function(n){return Math.floor(n.getTime()/864e5)}),D(function(n){return n.setUTCHours(0,0,0,0)},function(n,t){return n.setUTCDate(n.getUTCDate()+t)},function(n,t){return(t.getTime()-n.getTime())/864e5},function(n){return Math.floor(n.getTime()/864e5)})],week:[vn,hn],sunday:[vn,hn],monday:[Ft,Ht],tuesday:[Yt,Bt],wednesday:[Ot,_t],thursday:[jt,Xt],friday:[Pt,Lt],saturday:[$t,zt],month:[Hr,Lr],year:[Br,zr]},oi=Object.keys(It),ui=new RegExp("^every\\s*(\\d+)?\\s*("+oi.join("|")+")s?$","i"),Jt=function(n,t){if(Array.isArray(t))return t;if(typeof t=="string"&&"useUTC"in n){var e=t.match(ui);if(e){var a=e[1],o=e[2],r=It[o][n.useUTC?1:0];if(o==="day"){var i,u,l=n.domain(),s=l[0],f=l[1],g=new Date(f);return g.setDate(g.getDate()+1),(i=(u=r.every(Number(a??1)))==null?void 0:u.range(s,g))!=null?i:[]}if(a===void 0)return n.ticks(r);var c=r.every(Number(a));if(c)return n.ticks(c)}throw new Error("Invalid tickValues: "+t)}if("ticks"in n){if(t===void 0)return n.ticks();if(typeof(m=t)=="number"&&isFinite(m)&&Math.floor(m)===m)return n.ticks(t)}var m;return n.domain()};function O(){return O=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},O.apply(this,arguments)}var Kt=function(n){var t,e=n.axis,a=n.scale,o=n.ticksPosition,r=n.tickValues,i=n.tickSize,u=n.tickPadding,l=n.tickRotation,s=n.truncateTickAt,f=n.engine,g=f===void 0?"svg":f,c=Jt(a,r),m=re[g],d="bandwidth"in a?Gt(a):a,v={lineX:0,lineY:0},y={textX:0,textY:0},p=typeof document=="object"&&document.dir==="rtl",x=m.align.center,b=m.baseline.center;return e==="x"?(t=function(T){var C;return{x:(C=d(T))!=null?C:0,y:0}},v.lineY=i*(o==="after"?1:-1),y.textY=(i+u)*(o==="after"?1:-1),b=o==="after"?m.baseline.top:m.baseline.bottom,l===0?x=m.align.center:o==="after"&&l<0||o==="before"&&l>0?(x=m.align[p?"left":"right"],b=m.baseline.center):(o==="after"&&l>0||o==="before"&&l<0)&&(x=m.align[p?"right":"left"],b=m.baseline.center)):(t=function(T){var C;return{x:0,y:(C=d(T))!=null?C:0}},v.lineX=i*(o==="after"?1:-1),y.textX=(i+u)*(o==="after"?1:-1),x=o==="after"?m.align.left:m.align.right),{ticks:c.map(function(T){var C=typeof T=="string"?function(h){var w=String(h).length;return s&&s>0&&w>s?""+String(h).slice(0,s).concat("..."):""+h}(T):T;return O({key:T instanceof Date?""+T.valueOf():""+T,value:C},t(T),v,y)}),textAlign:x,textBaseline:b}},Nt=function(n,t){if(n===void 0||typeof n=="function")return n;if(t.type==="time"){var e=et(n);return function(a){return e(a instanceof Date?a:new Date(a))}}return me(n)},yn=function(n){var t,e=n.width,a=n.height,o=n.scale,r=n.axis,i=n.values,u=(t=i,(Array.isArray(t)?i:void 0)||Jt(o,i)),l="bandwidth"in o?Gt(o):o,s=r==="x"?u.map(function(f){var g,c;return{key:f instanceof Date?""+f.valueOf():""+f,x1:(g=l(f))!=null?g:0,x2:(c=l(f))!=null?c:0,y1:0,y2:a}}):u.map(function(f){var g,c;return{key:f instanceof Date?""+f.valueOf():""+f,x1:0,x2:e,y1:(g=l(f))!=null?g:0,y2:(c=l(f))!=null?c:0}});return s},ci=F.memo(function(n){var t,e=n.value,a=n.format,o=n.lineX,r=n.lineY,i=n.onClick,u=n.textBaseline,l=n.textAnchor,s=n.animatedProps,f=xn(),g=f.axis.ticks.line,c=f.axis.ticks.text,m=(t=a==null?void 0:a(e))!=null?t:e,d=F.useMemo(function(){var v={opacity:s.opacity};return i?{style:O({},v,{cursor:"pointer"}),onClick:function(y){return i(y,m)}}:{style:v}},[s.opacity,i,m]);return S.jsxs(J.g,O({transform:s.transform},d,{children:[S.jsx("line",{x1:0,x2:o,y1:0,y2:r,style:g}),c.outlineWidth>0&&S.jsx(J.text,{dominantBaseline:u,textAnchor:l,transform:s.textTransform,style:c,strokeWidth:2*c.outlineWidth,stroke:c.outlineColor,strokeLinejoin:"round",children:""+m}),S.jsx(J.text,{dominantBaseline:u,textAnchor:l,transform:s.textTransform,style:c,children:""+m})]}))}),si=function(n){var t=n.axis,e=n.scale,a=n.x,o=a===void 0?0:a,r=n.y,i=r===void 0?0:r,u=n.length,l=n.ticksPosition,s=n.tickValues,f=n.tickSize,g=f===void 0?5:f,c=n.tickPadding,m=c===void 0?5:c,d=n.tickRotation,v=d===void 0?0:d,y=n.format,p=n.renderTick,x=p===void 0?ci:p,b=n.truncateTickAt,T=n.legend,C=n.legendPosition,h=C===void 0?"end":C,w=n.legendOffset,U=w===void 0?0:w,q=n.onClick,on=n.ariaHidden,Z=xn(),_=Z.axis.legend.text,j=F.useMemo(function(){return Nt(y,e)},[y,e]),N=Kt({axis:t,scale:e,ticksPosition:l,tickValues:s,tickSize:g,tickPadding:m,tickRotation:v,truncateTickAt:b}),R=N.ticks,V=N.textAlign,nn=N.textBaseline,P=null;if(T!==void 0){var k,E=0,W=0,un=0;t==="y"?(un=-90,E=U,h==="start"?(k="start",W=u):h==="middle"?(k="middle",W=u/2):h==="end"&&(k="end")):(W=U,h==="start"?k="start":h==="middle"?(k="middle",E=u/2):h==="end"&&(k="end",E=u)),P=S.jsxs(S.Fragment,{children:[_.outlineWidth>0&&S.jsx("text",{transform:"translate("+E+", "+W+") rotate("+un+")",textAnchor:k,style:O({dominantBaseline:"central"},_),strokeWidth:2*_.outlineWidth,stroke:_.outlineColor,strokeLinejoin:"round",children:T}),S.jsx("text",{transform:"translate("+E+", "+W+") rotate("+un+")",textAnchor:k,style:O({dominantBaseline:"central"},_),children:T})]})}var wn=Jn(),Un=wn.animate,Sn=wn.config,cn=ge({transform:"translate("+o+","+i+")",lineX2:t==="x"?u:0,lineY2:t==="x"?0:u,config:Sn,immediate:!Un}),sn=F.useCallback(function(Y){return{opacity:1,transform:"translate("+Y.x+","+Y.y+")",textTransform:"translate("+Y.textX+","+Y.textY+") rotate("+v+")"}},[v]),Zt=F.useCallback(function(Y){return{opacity:0,transform:"translate("+Y.x+","+Y.y+")",textTransform:"translate("+Y.textX+","+Y.textY+") rotate("+v+")"}},[v]),ne=rt(R,{keys:function(Y){return Y.key},initial:sn,from:Zt,enter:sn,update:sn,leave:{opacity:0},config:Sn,immediate:!Un});return S.jsxs(J.g,{transform:cn.transform,"aria-hidden":on,children:[ne(function(Y,te,di,ee){return F.createElement(x,O({tickIndex:ee,format:j,rotate:v,textBaseline:nn,textAnchor:V,truncateTickAt:b,animatedProps:Y},te,q?{onClick:q}:{}))}),S.jsx(J.line,{style:Z.axis.domain.line,x1:0,x2:cn.lineX2,y1:0,y2:cn.lineY2}),P]})},li=F.memo(si),fi={ticksPosition:M.oneOf(["before","after"]),tickValues:M.oneOfType([M.number,M.arrayOf(M.oneOfType([M.number,M.string,M.instanceOf(Date)])),M.string]),rotateOnTickLength:M.shape({angle:M.number,length:M.number}),tickSize:M.number,tickPadding:M.number,tickRotation:M.number,format:M.oneOfType([M.func,M.string]),renderTick:M.func,legend:M.node,legendPosition:M.oneOf(["start","middle","end"]),legendOffset:M.number,ariaHidden:M.bool},Di=M.shape(fi),Qt=["top","right","bottom","left"],Fi=F.memo(function(n){var t=n.xScale,e=n.yScale,a=n.width,o=n.height,r={top:n.top,right:n.right,bottom:n.bottom,left:n.left};return S.jsx(S.Fragment,{children:Qt.map(function(i){var u=r[i];if(!u)return null;var l=i==="top"||i==="bottom";return S.jsx(li,O({},u,{axis:l?"x":"y",x:i==="right"?a:0,y:i==="bottom"?o:0,scale:l?t:e,length:l?a:o,ticksPosition:i==="top"||i==="left"?"before":"after",truncateTickAt:u.truncateTickAt}),i)})})}),gi=F.memo(function(n){var t=n.animatedProps,e=xn();return S.jsx(J.line,O({},t,e.grid.line))}),In=F.memo(function(n){var t=n.lines,e=Jn(),a=e.animate,o=e.config,r=rt(t,{keys:function(i){return i.key},initial:function(i){return{opacity:1,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2}},from:function(i){return{opacity:0,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2}},enter:function(i){return{opacity:1,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2}},update:function(i){return{opacity:1,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2}},leave:{opacity:0},config:o,immediate:!a});return S.jsx("g",{children:r(function(i,u){return F.createElement(gi,O({},u,{key:u.key,animatedProps:i}))})})}),Yi=F.memo(function(n){var t=n.width,e=n.height,a=n.xScale,o=n.yScale,r=n.xValues,i=n.yValues,u=F.useMemo(function(){return!!a&&yn({width:t,height:e,scale:a,axis:"x",values:r})},[a,r,t,e]),l=F.useMemo(function(){return!!o&&yn({width:t,height:e,scale:o,axis:"y",values:i})},[e,t,o,i]);return S.jsxs(S.Fragment,{children:[u&&S.jsx(In,{lines:u}),l&&S.jsx(In,{lines:l})]})}),mi=function(n,t){var e,a=t.axis,o=t.scale,r=t.x,i=r===void 0?0:r,u=t.y,l=u===void 0?0:u,s=t.length,f=t.ticksPosition,g=t.tickValues,c=t.tickSize,m=c===void 0?5:c,d=t.tickPadding,v=d===void 0?5:d,y=t.tickRotation,p=y===void 0?0:y,x=t.format,b=t.legend,T=t.legendPosition,C=T===void 0?"end":T,h=t.legendOffset,w=h===void 0?0:h,U=t.theme,q=Kt({axis:a,scale:o,ticksPosition:f,tickValues:g,tickSize:m,tickPadding:v,tickRotation:p,engine:"canvas"}),on=q.ticks,Z=q.textAlign,_=q.textBaseline;n.save(),n.translate(i,l),n.textAlign=Z,n.textBaseline=_;var j=U.axis.ticks.text;n.font=(j.fontWeight?j.fontWeight+" ":"")+j.fontSize+"px "+j.fontFamily,((e=U.axis.domain.line.strokeWidth)!=null?e:0)>0&&(n.lineWidth=Number(U.axis.domain.line.strokeWidth),n.lineCap="square",U.axis.domain.line.stroke&&(n.strokeStyle=U.axis.domain.line.stroke),n.beginPath(),n.moveTo(0,0),n.lineTo(a==="x"?s:0,a==="x"?0:s),n.stroke());var N=typeof x=="function"?x:function(k){return""+k};if(on.forEach(function(k){var E;((E=U.axis.ticks.line.strokeWidth)!=null?E:0)>0&&(n.lineWidth=Number(U.axis.ticks.line.strokeWidth),n.lineCap="square",U.axis.ticks.line.stroke&&(n.strokeStyle=U.axis.ticks.line.stroke),n.beginPath(),n.moveTo(k.x,k.y),n.lineTo(k.x+k.lineX,k.y+k.lineY),n.stroke());var W=N(k.value);n.save(),n.translate(k.x+k.textX,k.y+k.textY),n.rotate(Dn(p)),j.outlineWidth>0&&(n.strokeStyle=j.outlineColor,n.lineWidth=2*j.outlineWidth,n.lineJoin="round",n.strokeText(""+W,0,0)),U.axis.ticks.text.fill&&(n.fillStyle=j.fill),n.fillText(""+W,0,0),n.restore()}),b!==void 0){var R=0,V=0,nn=0,P="center";a==="y"?(nn=-90,R=w,C==="start"?(P="start",V=s):C==="middle"?(P="center",V=s/2):C==="end"&&(P="end")):(V=w,C==="start"?P="start":C==="middle"?(P="center",R=s/2):C==="end"&&(P="end",R=s)),n.translate(R,V),n.rotate(Dn(nn)),n.font=(U.axis.legend.text.fontWeight?U.axis.legend.text.fontWeight+" ":"")+U.axis.legend.text.fontSize+"px "+U.axis.legend.text.fontFamily,U.axis.legend.text.fill&&(n.fillStyle=U.axis.legend.text.fill),n.textAlign=P,n.textBaseline="middle",n.fillText(b,0,0)}n.restore()},Oi=function(n,t){var e=t.xScale,a=t.yScale,o=t.width,r=t.height,i=t.top,u=t.right,l=t.bottom,s=t.left,f=t.theme,g={top:i,right:u,bottom:l,left:s};Qt.forEach(function(c){var m=g[c];if(!m)return null;var d=c==="top"||c==="bottom",v=c==="top"||c==="left"?"before":"after",y=d?e:a,p=Nt(m.format,y);mi(n,O({},m,{axis:d?"x":"y",x:c==="right"?o:0,y:c==="bottom"?r:0,scale:y,format:p,length:d?o:r,ticksPosition:v,theme:f}))})},ji=function(n,t){var e=t.width,a=t.height,o=t.scale,r=t.axis,i=t.values;yn({width:e,height:a,scale:o,axis:r,values:i}).forEach(function(u){n.beginPath(),n.moveTo(u.x1,u.y1),n.lineTo(u.x2,u.y2),n.stroke()})};export{ji as D,Fi as X,Rn as c,Si as d,Oi as j,Qe as q,Di as w,Yi as z};
