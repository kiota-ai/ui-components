import{j as i}from"./jsx-runtime-ffb262ed.js";import{r as O}from"./index-76fb7be0.js";import{V as De,J as Ye,H as er,B as rr,_ as or,E as Ae,p as ar,W as He,D as tr,k as nr,Z as Te,$ as Re,w as ir}from"./nivo-colors.es-6a419262.js";import{R as sr,S as pr}from"./nivo-annotations.es-1d6fd017.js";import{$ as _e,d as ze,u as Ve,k as re}from"./viridis-86f79054.js";import{I as lr}from"./area-ef1ce4b1.js";import{m as dr}from"./line-d3dcc640.js";import{l as ur}from"./linear-b6c2185e.js";import"./_commonjsHelpers-de833af9.js";import"./index-8d47fad6.js";import"./hasIn-bc1d64c1.js";import"./_baseIsEqual-83a59b7a.js";import"./isString-addf3cb0.js";import"./isEqual-f4967cc5.js";import"./_baseEach-997447e4.js";import"./_baseForOwn-af9f9dd7.js";import"./_baseClone-058cc0a2.js";import"./_basePickBy-65d675d2.js";import"./index-d3ea75b5.js";function b(){return b=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},b.apply(this,arguments)}var n={layers:["separators","parts","labels","annotations"],direction:"vertical",interpolation:"smooth",spacing:0,shapeBlending:.66,colors:{scheme:"nivo"},fillOpacity:1,borderWidth:6,borderColor:{from:"color"},borderOpacity:.66,enableLabel:!0,labelColor:{theme:"background"},enableBeforeSeparators:!0,beforeSeparatorLength:0,beforeSeparatorOffset:0,enableAfterSeparators:!0,afterSeparatorLength:0,afterSeparatorOffset:0,annotations:[],isInteractive:!0,currentPartSizeExtension:0,role:"img",animate:De.defaultProps.animate,motionConfig:De.defaultProps.config},cr=function(e){var o=e.part;return i.jsx(ir,{id:o.data.label,value:o.formattedValue,color:o.color,enableChip:!0})},fr=function(e,o){var t=lr();return o==="vertical"?t.curve(e==="smooth"?_e:ze).x0(function(a){return a.x0}).x1(function(a){return a.x1}).y(function(a){return a.y}):t.curve(e==="smooth"?_e:ze).y0(function(a){return a.y0}).y1(function(a){return a.y1}).x(function(a){return a.x}),[t,dr().defined(function(a){return a!==null}).x(function(a){return a.x}).y(function(a){return a.y}).curve(e==="smooth"?_e:ze)]},hr=function(e){var o,t,a=e.data,s=e.direction,p=e.width,u=e.height,d=e.spacing;s==="vertical"?(o=u,t=p):(o=p,t=u);var y=(o-d*(a.length-1))/a.length,v=function(l){return d*l+y*l};v.bandwidth=y;var f=a.map(function(l){return l.value});return[v,ur().domain([0,Math.max.apply(Math,f)]).range([0,t])]},vr=function(e){var o=e.parts,t=e.direction,a=e.width,s=e.height,p=e.spacing,u=e.enableBeforeSeparators,d=e.beforeSeparatorOffset,y=e.enableAfterSeparators,v=e.afterSeparatorOffset,f=[],l=[],h=o[o.length-1];if(t==="vertical"){o.forEach(function(x){var g=x.y0-p/2;u&&f.push({partId:x.data.id,x0:0,x1:x.x0-d,y0:g,y1:g}),y&&l.push({partId:x.data.id,x0:x.x1+v,x1:a,y0:g,y1:g})});var c=h.y1;u&&f.push(b({},f[f.length-1],{partId:"none",y0:c,y1:c})),y&&l.push(b({},l[l.length-1],{partId:"none",y0:c,y1:c}))}else if(t==="horizontal"){o.forEach(function(x){var g=x.x0-p/2;f.push({partId:x.data.id,x0:g,x1:g,y0:0,y1:x.y0-d}),l.push({partId:x.data.id,x0:g,x1:g,y0:x.y1+v,y1:s})});var C=h.x1;f.push(b({},f[f.length-1],{partId:"none",x0:C,x1:C})),l.push(b({},l[l.length-1],{partId:"none",x0:C,x1:C}))}return[f,l]},xr=function(e){var o=e.parts,t=e.setCurrentPartId,a=e.isInteractive,s=e.onMouseEnter,p=e.onMouseLeave,u=e.onMouseMove,d=e.onClick,y=e.showTooltipFromEvent,v=e.hideTooltip,f=e.tooltip,l=f===void 0?cr:f;return a?o.map(function(h){return b({},h,{onMouseEnter:function(c){t(h.data.id),y(O.createElement(l,{part:h}),c),s!==void 0&&s(h,c)},onMouseLeave:function(c){t(null),v(),p!==void 0&&p(h,c)},onMouseMove:function(c){y(O.createElement(l,{part:h}),c),u!==void 0&&u(h,c)},onClick:d!==void 0?function(c){d(h,c)}:void 0})}):o},yr=function(e){var o,t,a=e.data,s=e.width,p=e.height,u=e.direction,d=u===void 0?n.direction:u,y=e.interpolation,v=y===void 0?n.interpolation:y,f=e.spacing,l=f===void 0?n.spacing:f,h=e.shapeBlending,c=h===void 0?n.shapeBlending:h,C=e.valueFormat,x=e.colors,g=x===void 0?n.colors:x,oe=e.fillOpacity,ae=oe===void 0?n.fillOpacity:oe,te=e.borderWidth,ne=te===void 0?n.borderWidth:te,ie=e.borderColor,se=ie===void 0?n.borderColor:ie,pe=e.borderOpacity,le=pe===void 0?n.borderOpacity:pe,de=e.labelColor,ue=de===void 0?n.labelColor:de,ce=e.enableBeforeSeparators,G=ce===void 0?n.enableBeforeSeparators:ce,fe=e.beforeSeparatorLength,he=fe===void 0?n.beforeSeparatorLength:fe,ve=e.beforeSeparatorOffset,_=ve===void 0?n.beforeSeparatorOffset:ve,xe=e.enableAfterSeparators,z=xe===void 0?n.enableAfterSeparators:xe,ye=e.afterSeparatorLength,me=ye===void 0?n.afterSeparatorLength:ye,be=e.afterSeparatorOffset,A=be===void 0?n.afterSeparatorOffset:be,ge=e.isInteractive,V=ge===void 0?n.isInteractive:ge,I=e.currentPartSizeExtension,P=I===void 0?n.currentPartSizeExtension:I,Se=e.currentBorderWidth,$=e.onMouseEnter,Ce=e.onMouseMove,D=e.onMouseLeave,Pe=e.onClick,Me=e.tooltip,Oe=Ae(),je=ar(g,"id"),Ie=He(se,Oe),Le=He(ue,Oe),Be=tr(C),H=O.useMemo(function(){return fr(v,d)},[v,d]),R=H[0],q=H[1],w=G?he+_:0,N=z?me+A:0;d==="vertical"?(o=s-w-N,t=p):(o=s,t=p-w-N);var B=O.useMemo(function(){return hr({data:a,direction:d,width:o,height:t,spacing:l})},[a,d,o,t,l]),W=B[0],J=B[1],Ee=O.useState(null),Z=Ee[0],F=Ee[1],M=O.useMemo(function(){var X=a.map(function(r,ke){var S,L,E,m,$e=r.id===Z;d==="vertical"?(S=J(r.value),L=W.bandwidth,m=w+.5*(o-S),E=W(ke)):(S=W.bandwidth,L=J(r.value),m=W(ke),E=w+.5*(t-L));var Qe=m+S,Ue=m+.5*S,Ke=E+L,Xe=E+.5*L,Y={data:r,width:S,height:L,color:je(r),fillOpacity:ae,borderWidth:$e&&Se!==void 0?Se:ne,borderOpacity:le,formattedValue:Be(r.value),isCurrent:$e,x:Ue,x0:m,x1:Qe,y:Xe,y0:E,y1:Ke,borderColor:"",labelColor:"",points:[],areaPoints:[],borderPoints:[]};return Y.borderColor=Ie(Y),Y.labelColor=Le(Y),Y}),k=c/2;return X.forEach(function(r,ke){var S=X[ke+1];if(d==="vertical"){r.points.push({x:r.x0,y:r.y0}),r.points.push({x:r.x1,y:r.y0}),S?(r.points.push({x:S.x1,y:r.y1}),r.points.push({x:S.x0,y:r.y1})):(r.points.push({x:r.points[1].x,y:r.y1}),r.points.push({x:r.points[0].x,y:r.y1})),r.isCurrent&&(r.points[0].x-=P,r.points[1].x+=P,r.points[2].x+=P,r.points[3].x-=P),r.areaPoints=[{x:0,x0:r.points[0].x,x1:r.points[1].x,y:r.y0,y0:0,y1:0}],r.areaPoints.push(b({},r.areaPoints[0],{y:r.y0+r.height*k}));var L={x:0,x0:r.points[3].x,x1:r.points[2].x,y:r.y1,y0:0,y1:0};r.areaPoints.push(b({},L,{y:r.y1-r.height*k})),r.areaPoints.push(L),[0,1,2,3].map(function(m){r.borderPoints.push({x:r.areaPoints[m].x0,y:r.areaPoints[m].y})}),r.borderPoints.push(null),[3,2,1,0].map(function(m){r.borderPoints.push({x:r.areaPoints[m].x1,y:r.areaPoints[m].y})})}else{r.points.push({x:r.x0,y:r.y0}),S?(r.points.push({x:r.x1,y:S.y0}),r.points.push({x:r.x1,y:S.y1})):(r.points.push({x:r.x1,y:r.y0}),r.points.push({x:r.x1,y:r.y1})),r.points.push({x:r.x0,y:r.y1}),r.isCurrent&&(r.points[0].y-=P,r.points[1].y-=P,r.points[2].y+=P,r.points[3].y+=P),r.areaPoints=[{x:r.x0,x0:0,x1:0,y:0,y0:r.points[0].y,y1:r.points[3].y}],r.areaPoints.push(b({},r.areaPoints[0],{x:r.x0+r.width*k}));var E={x:r.x1,x0:0,x1:0,y:0,y0:r.points[1].y,y1:r.points[2].y};r.areaPoints.push(b({},E,{x:r.x1-r.width*k})),r.areaPoints.push(E),[0,1,2,3].map(function(m){r.borderPoints.push({x:r.areaPoints[m].x,y:r.areaPoints[m].y0})}),r.borderPoints.push(null),[3,2,1,0].map(function(m){r.borderPoints.push({x:r.areaPoints[m].x,y:r.areaPoints[m].y1})})}}),X},[a,d,J,W,o,t,w,N,c,je,Be,Ie,Le,Z]),we=nr(),We=we.showTooltipFromEvent,T=we.hideTooltip,Q=O.useMemo(function(){return xr({parts:M,setCurrentPartId:F,isInteractive:V,onMouseEnter:$,onMouseLeave:D,onMouseMove:Ce,onClick:Pe,showTooltipFromEvent:We,hideTooltip:T,tooltip:Me})},[M,F,V,$,D,Ce,Pe,We,T,Me]),Fe=O.useMemo(function(){return vr({parts:M,direction:d,width:s,height:p,spacing:l,enableBeforeSeparators:G,beforeSeparatorOffset:_,enableAfterSeparators:z,afterSeparatorOffset:A})},[M,d,s,p,l,G,_,z,A]),U=Fe[0],j=Fe[1],K=O.useMemo(function(){return{width:s,height:p,parts:Q,areaGenerator:R,borderGenerator:q,beforeSeparators:U,afterSeparators:j,setCurrentPartId:F}},[s,p,Q,R,q,U,j,F]);return{parts:Q,areaGenerator:R,borderGenerator:q,beforeSeparators:U,afterSeparators:j,setCurrentPartId:F,currentPartId:Z,customLayerProps:K}},mr=function(e,o){return pr({data:e,annotations:o,getPosition:function(t){return{x:t.x,y:t.y}},getDimensions:function(t){var a=t.width,s=t.height;return{size:Math.max(a,s),width:a,height:s}}})},br=function(e){var o=e.part,t=e.areaGenerator,a=e.borderGenerator,s=Te(),p=s.animate,u=s.config,d=Re(t(o.areaPoints)),y=Re(a(o.borderPoints)),v=Ve({areaColor:o.color,borderWidth:o.borderWidth,borderColor:o.borderColor,config:u,immediate:!p});return i.jsxs(i.Fragment,{children:[o.borderWidth>0&&i.jsx(re.path,{d:y,stroke:v.borderColor,strokeWidth:v.borderWidth,strokeOpacity:o.borderOpacity,fill:"none"}),i.jsx(re.path,{d,fill:v.areaColor,fillOpacity:o.fillOpacity,onMouseEnter:o.onMouseEnter,onMouseLeave:o.onMouseLeave,onMouseMove:o.onMouseMove,onClick:o.onClick})]})},gr=function(e){var o=e.parts,t=e.areaGenerator,a=e.borderGenerator;return i.jsx(i.Fragment,{children:o.map(function(s){return i.jsx(br,{part:s,areaGenerator:t,borderGenerator:a},s.data.id)})})},Sr=function(e){var o=e.part,t=Ae(),a=Te(),s=a.animate,p=a.config,u=Ve({transform:"translate("+o.x+", "+o.y+")",color:o.labelColor,config:p,immediate:!s});return i.jsx(re.g,{transform:u.transform,children:i.jsx(re.text,{textAnchor:"middle",dominantBaseline:"central",style:b({},t.labels.text,{fill:u.color,pointerEvents:"none"}),children:o.formattedValue})})},Cr=function(e){var o=e.parts;return i.jsx(i.Fragment,{children:o.map(function(t){return i.jsx(Sr,{part:t},t.data.id)})})},qe=function(e){var o=e.separator,t=Ae(),a=Te(),s=a.animate,p=a.config,u=Ve({x1:o.x0,x2:o.x1,y1:o.y0,y2:o.y1,config:p,immediate:!s});return i.jsx(re.line,b({x1:u.x1,x2:u.x2,y1:u.y1,y2:u.y2,fill:"none"},t.grid.line))},Pr=function(e){var o=e.beforeSeparators,t=e.afterSeparators;return i.jsxs(i.Fragment,{children:[o.map(function(a){return i.jsx(qe,{separator:a},a.partId)}),t.map(function(a){return i.jsx(qe,{separator:a},a.partId)})]})},Mr=function(e){var o=e.parts,t=e.annotations,a=mr(o,t);return i.jsx(i.Fragment,{children:a.map(function(s,p){return i.jsx(sr,b({},s),p)})})},Or=["isInteractive","animate","motionConfig","theme","renderWrapper"],jr=function(e){var o=e.data,t=e.width,a=e.height,s=e.margin,p=e.direction,u=p===void 0?n.direction:p,d=e.interpolation,y=d===void 0?n.interpolation:d,v=e.spacing,f=v===void 0?n.spacing:v,l=e.shapeBlending,h=l===void 0?n.shapeBlending:l,c=e.valueFormat,C=e.colors,x=C===void 0?n.colors:C,g=e.fillOpacity,oe=g===void 0?n.fillOpacity:g,ae=e.borderWidth,te=ae===void 0?n.borderWidth:ae,ne=e.borderColor,ie=ne===void 0?n.borderColor:ne,se=e.borderOpacity,pe=se===void 0?n.borderOpacity:se,le=e.enableLabel,de=le===void 0?n.enableLabel:le,ue=e.labelColor,ce=ue===void 0?n.labelColor:ue,G=e.enableBeforeSeparators,fe=G===void 0?n.enableBeforeSeparators:G,he=e.beforeSeparatorLength,ve=he===void 0?n.beforeSeparatorLength:he,_=e.beforeSeparatorOffset,xe=_===void 0?n.beforeSeparatorOffset:_,z=e.enableAfterSeparators,ye=z===void 0?n.enableAfterSeparators:z,me=e.afterSeparatorLength,be=me===void 0?n.afterSeparatorLength:me,A=e.afterSeparatorOffset,ge=A===void 0?n.afterSeparatorOffset:A,V=e.layers,I=V===void 0?n.layers:V,P=e.annotations,Se=P===void 0?n.annotations:P,$=e.isInteractive,Ce=$===void 0?n.isInteractive:$,D=e.currentPartSizeExtension,Pe=D===void 0?n.currentPartSizeExtension:D,Me=e.currentBorderWidth,Oe=e.onMouseEnter,je=e.onMouseMove,Ie=e.onMouseLeave,Le=e.onClick,Be=e.tooltip,H=e.role,R=H===void 0?n.role:H,q=e.ariaLabel,w=e.ariaLabelledBy,N=e.ariaDescribedBy,B=rr(t,a,s),W=B.margin,J=B.innerWidth,Ee=B.innerHeight,Z=B.outerWidth,F=B.outerHeight,M=yr({data:o,width:J,height:Ee,direction:u,interpolation:y,spacing:f,shapeBlending:h,valueFormat:c,colors:x,fillOpacity:oe,borderWidth:te,borderColor:ie,borderOpacity:pe,labelColor:ce,enableBeforeSeparators:fe,beforeSeparatorLength:ve,beforeSeparatorOffset:xe,enableAfterSeparators:ye,afterSeparatorLength:be,afterSeparatorOffset:ge,isInteractive:Ce,currentPartSizeExtension:Pe,currentBorderWidth:Me,onMouseEnter:Oe,onMouseMove:je,onMouseLeave:Ie,onClick:Le,tooltip:Be}),we=M.areaGenerator,We=M.borderGenerator,T=M.parts,Q=M.beforeSeparators,Fe=M.afterSeparators,U=M.customLayerProps,j={separators:null,parts:null,annotations:null,labels:null};return I.includes("separators")&&(j.separators=i.jsx(Pr,{beforeSeparators:Q,afterSeparators:Fe},"separators")),I.includes("parts")&&(j.parts=i.jsx(gr,{parts:T,areaGenerator:we,borderGenerator:We},"parts")),I!=null&&I.includes("annotations")&&(j.annotations=i.jsx(Mr,{parts:T,annotations:Se},"annotations")),I.includes("labels")&&de&&(j.labels=i.jsx(Cr,{parts:T},"labels")),i.jsx(or,{width:Z,height:F,margin:W,role:R,ariaLabel:q,ariaLabelledBy:w,ariaDescribedBy:N,children:I.map(function(K,X){var k;return typeof K=="function"?i.jsx(O.Fragment,{children:O.createElement(K,U)},X):(k=j==null?void 0:j[K])!=null?k:null})})},Ir=function(e){var o=e.isInteractive,t=o===void 0?n.isInteractive:o,a=e.animate,s=a===void 0?n.animate:a,p=e.motionConfig,u=p===void 0?n.motionConfig:p,d=e.theme,y=e.renderWrapper,v=function(f,l){if(f==null)return{};var h,c,C={},x=Object.keys(f);for(c=0;c<x.length;c++)h=x[c],l.indexOf(h)>=0||(C[h]=f[h]);return C}(e,Or);return i.jsx(er,{animate:s,isInteractive:t,motionConfig:u,renderWrapper:y,theme:d,children:i.jsx(jr,b({isInteractive:t},v))})},Lr=function(e){return i.jsx(Ye,{children:function(o){var t=o.width,a=o.height;return i.jsx(Ir,b({width:t,height:a},e))}})};const Ge=({data:e=[],margin:o={top:20,right:20,bottom:20,left:20},...t})=>i.jsx(Lr,{data:e,margin:o,direction:"horizontal",shapeBlending:.74,valueFormat:">-.4s",colors:{scheme:"spectral"},borderWidth:0,labelColor:{from:"color",modifiers:[["darker",3]]},...t});try{Ge.displayName="FunnelChart",Ge.__docgenInfo={description:"",displayName:"FunnelChart",props:{data:{defaultValue:{value:"[]"},description:"",name:"data",required:!1,type:{name:"any"}},margin:{defaultValue:{value:"{ top: 20, right: 20, bottom: 20, left: 20 }"},description:"",name:"margin",required:!1,type:{name:"any"}}}}}catch{}const Qr={title:"FunnelChart",component:Ge},Br=e=>i.jsx("div",{style:{height:"500px"},children:i.jsx(Ge,{...e})}),ee=Br.bind({});ee.args={data:[{id:"Step 1",value:100},{id:"Step 2",value:75},{id:"Step 3",value:50},{id:"Step 4",value:25}],margin:{top:20,right:20,bottom:20,left:20}};var Ne,Je,Ze;ee.parameters={...ee.parameters,docs:{...(Ne=ee.parameters)==null?void 0:Ne.docs,source:{originalSource:`args => <div style={{
  height: '500px'
}}>
    <FunnelChart {...args} />
  </div>`,...(Ze=(Je=ee.parameters)==null?void 0:Je.docs)==null?void 0:Ze.source}}};const Ur=["BasicFunnelChart"];export{ee as BasicFunnelChart,Ur as __namedExportsOrder,Qr as default};
